<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.17">
  <compounddef id="sample__consistency_8py" kind="file" language="Python">
    <compoundname>sample_consistency.py</compoundname>
    <innerclass refid="classsample__consistency_1_1_sample_content" prot="public">sample_consistency::SampleContent</innerclass>
    <innernamespace refid="namespacesample__consistency">sample_consistency</innernamespace>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1" refid="namespacesample__consistency" refkind="compound"><highlight class="keyword">from</highlight><highlight class="normal"><sp/><ref refid="namespace_analysis_g_1_1core" kindref="compound">AnalysisG.core</ref><sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>IO</highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>pathlib</highlight></codeline>
<codeline lineno="3"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>pickle</highlight></codeline>
<codeline lineno="4"><highlight class="normal"></highlight></codeline>
<codeline lineno="5" refid="classsample__consistency_1_1_sample_content" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classsample__consistency_1_1_sample_content" kindref="compound">SampleContent</ref>:</highlight></codeline>
<codeline lineno="6"><highlight class="normal"></highlight></codeline>
<codeline lineno="7" refid="classsample__consistency_1_1_sample_content_1a5789fa6af7ab493815d4ffc8d4289351" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classsample__consistency_1_1_sample_content_1a5789fa6af7ab493815d4ffc8d4289351" kindref="member">__init__</ref>(self):</highlight></codeline>
<codeline lineno="8"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsample__consistency_1_1_sample_content_1ac39551d9fadef04978bc7e8df17dbc7f" kindref="member">_isdata</ref><sp/>=<sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsample__consistency_1_1_sample_content_1a21bd680c89233425af2454d2d9c8e572" kindref="member">_kfold</ref><sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="10"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsample__consistency_1_1_sample_content_1a61bc51ad781130ba11b44637f1ad6f2a" kindref="member">_epoch</ref><sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="11"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsample__consistency_1_1_sample_content_1a16616a423fc64e462ad398ec37e1cbb5" kindref="member">_mrk</ref><sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="12"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsample__consistency_1_1_sample_content_1af75bf5254fa4b32823ebd7a3dce4a2f3" kindref="member">_trig</ref><sp/>=<sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="13"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsample__consistency_1_1_sample_content_1a77cea28c0ac361717838367318bc0757" kindref="member">_samples</ref><sp/>=<sp/>{}</highlight></codeline>
<codeline lineno="14"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsample__consistency_1_1_sample_content_1ad25ea1f512761bf800b51dbb43111354" kindref="member">_iter</ref><sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="15"><highlight class="normal"></highlight></codeline>
<codeline lineno="16" refid="classsample__consistency_1_1_sample_content_1a2c466248adbb922bfb1e45a472bc0f34" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classsample__consistency_1_1_sample_content_1a2c466248adbb922bfb1e45a472bc0f34" kindref="member">addSample</ref>(self,<sp/>inpt):</highlight></codeline>
<codeline lineno="17"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lst<sp/>=<sp/>inpt.split(</highlight><highlight class="stringliteral">&quot;/&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="18"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fname<sp/>=<sp/>lst[-1]</highlight></codeline>
<codeline lineno="19"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>smpln<sp/>=<sp/>lst[-2]</highlight></codeline>
<codeline lineno="20"><highlight class="normal"></highlight></codeline>
<codeline lineno="21"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>io<sp/>=<sp/>IO(inpt)</highlight></codeline>
<codeline lineno="22"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>io.Trees<sp/>=<sp/>[</highlight><highlight class="stringliteral">&quot;nominal&quot;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="23"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>io.Leaves<sp/>=<sp/>[</highlight><highlight class="stringliteral">&quot;event_weight&quot;</highlight><highlight class="normal">]<sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>self.<ref refid="classsample__consistency_1_1_sample_content_1ac39551d9fadef04978bc7e8df17dbc7f" kindref="member">_isdata</ref><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>[</highlight><highlight class="stringliteral">&quot;weight_mc&quot;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="24"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lx<sp/>=<sp/>len(io)</highlight></codeline>
<codeline lineno="25"><highlight class="normal"></highlight></codeline>
<codeline lineno="26"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:<sp/>self.<ref refid="classsample__consistency_1_1_sample_content_1a77cea28c0ac361717838367318bc0757" kindref="member">_samples</ref>[smpln][fname]<sp/>=<sp/>lx</highlight></codeline>
<codeline lineno="27"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>KeyError:</highlight></codeline>
<codeline lineno="28"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsample__consistency_1_1_sample_content_1a77cea28c0ac361717838367318bc0757" kindref="member">_samples</ref>[smpln]<sp/>=<sp/>{}</highlight></codeline>
<codeline lineno="29"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsample__consistency_1_1_sample_content_1a77cea28c0ac361717838367318bc0757" kindref="member">_samples</ref>[smpln][fname]<sp/>=<sp/>lx</highlight></codeline>
<codeline lineno="30"><highlight class="normal"></highlight></codeline>
<codeline lineno="31"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classsample__consistency_1_1_sample_content_1af75bf5254fa4b32823ebd7a3dce4a2f3" kindref="member">_trig</ref><sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>self.<ref refid="classsample__consistency_1_1_sample_content_1ac39551d9fadef04978bc7e8df17dbc7f" kindref="member">_isdata</ref>:<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="32"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classsample__consistency_1_1_sample_content_1a21bd680c89233425af2454d2d9c8e572" kindref="member">_kfold</ref><sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:<sp/>self.<ref refid="classsample__consistency_1_1_sample_content_1a21bd680c89233425af2454d2d9c8e572" kindref="member">_kfold</ref><sp/>=<sp/>lst[-3]</highlight></codeline>
<codeline lineno="33"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classsample__consistency_1_1_sample_content_1a61bc51ad781130ba11b44637f1ad6f2a" kindref="member">_epoch</ref><sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:<sp/>self.<ref refid="classsample__consistency_1_1_sample_content_1a61bc51ad781130ba11b44637f1ad6f2a" kindref="member">_epoch</ref><sp/>=<sp/>lst[-4]</highlight></codeline>
<codeline lineno="34"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classsample__consistency_1_1_sample_content_1a16616a423fc64e462ad398ec37e1cbb5" kindref="member">_mrk</ref><sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:<sp/>self.<ref refid="classsample__consistency_1_1_sample_content_1a16616a423fc64e462ad398ec37e1cbb5" kindref="member">_mrk</ref><sp/>=<sp/>lst[-5]</highlight></codeline>
<codeline lineno="35"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsample__consistency_1_1_sample_content_1af75bf5254fa4b32823ebd7a3dce4a2f3" kindref="member">_trig</ref><sp/>=<sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="36"><highlight class="normal"></highlight></codeline>
<codeline lineno="37" refid="classsample__consistency_1_1_sample_content_1ac31c369f905ec99cc73970dc51fa31db" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classsample__consistency_1_1_sample_content_1ac31c369f905ec99cc73970dc51fa31db" kindref="member">__iter__</ref>(self):<sp/>self._iter<sp/>=<sp/>iter(self.<ref refid="classsample__consistency_1_1_sample_content_1a77cea28c0ac361717838367318bc0757" kindref="member">_samples</ref>);<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>self</highlight></codeline>
<codeline lineno="38" refid="classsample__consistency_1_1_sample_content_1a51cee21066158f983c0385d55d489dfd" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classsample__consistency_1_1_sample_content_1a51cee21066158f983c0385d55d489dfd" kindref="member">__next__</ref>(self):</highlight></codeline>
<codeline lineno="39"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>key<sp/>=<sp/>next(self.<ref refid="classsample__consistency_1_1_sample_content_1ad25ea1f512761bf800b51dbb43111354" kindref="member">_iter</ref>)</highlight></codeline>
<codeline lineno="40"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>self.<ref refid="classsample__consistency_1_1_sample_content_1a77cea28c0ac361717838367318bc0757" kindref="member">_samples</ref>[key],<sp/>key</highlight></codeline>
<codeline lineno="41"><highlight class="normal"></highlight></codeline>
<codeline lineno="42" refid="namespacesample__consistency_1a8ba8f1cc971d64a05ca6a22a5e8d93d3" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacesample__consistency_1a8ba8f1cc971d64a05ca6a22a5e8d93d3" kindref="member">build_samples</ref>(pth):</highlight></codeline>
<codeline lineno="43"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[str(i)<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>i<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>pathlib.Path(pth).glob(</highlight><highlight class="stringliteral">&quot;**/*.root&quot;</highlight><highlight class="normal">)<sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>str(i).endswith(</highlight><highlight class="stringliteral">&quot;.root&quot;</highlight><highlight class="normal">)]</highlight></codeline>
<codeline lineno="44"><highlight class="normal"></highlight></codeline>
<codeline lineno="45"><highlight class="normal"></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:<sp/>data<sp/>=<sp/>pickle.load(open(</highlight><highlight class="stringliteral">&quot;./cache/data.pkl&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;rb&quot;</highlight><highlight class="normal">))</highlight></codeline>
<codeline lineno="46"><highlight class="normal"></highlight><highlight class="keywordflow">except</highlight><highlight class="normal">:<sp/>data<sp/>=<sp/>{</highlight><highlight class="stringliteral">&quot;null&quot;</highlight><highlight class="normal"><sp/>:<sp/>{}}</highlight></codeline>
<codeline lineno="47"><highlight class="normal"></highlight></codeline>
<codeline lineno="48"><highlight class="normal"></highlight></codeline>
<codeline lineno="49" refid="namespacesample__consistency_1a30ff8e698c6b1d5ee4a7a8b25afd37a6" refkind="member"><highlight class="normal">root<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;/CERN/Samples/mc16-full/&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="50" refid="namespacesample__consistency_1a118a42da7c57d5674c68f965dfefeb5e" refkind="member"><highlight class="normal">mc16_samples<sp/>=<sp/><ref refid="namespacesample__consistency_1a8ba8f1cc971d64a05ca6a22a5e8d93d3" kindref="member">build_samples</ref>(root)</highlight></codeline>
<codeline lineno="51"><highlight class="normal">data[</highlight><highlight class="stringliteral">&quot;mc16&quot;</highlight><highlight class="normal">]<sp/>=<sp/>{}</highlight></codeline>
<codeline lineno="52"><highlight class="normal"></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>i<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>mc16_samples:</highlight></codeline>
<codeline lineno="53" refid="namespacesample__consistency_1afcefb5e959d7b7ae1c0264f15a0eaa11" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/>smpls<sp/>=<sp/>i.split(</highlight><highlight class="stringliteral">&quot;/&quot;</highlight><highlight class="normal">)[-2]<sp/>+<sp/></highlight><highlight class="stringliteral">&quot;/&quot;</highlight><highlight class="normal"><sp/>+<sp/>i.split(</highlight><highlight class="stringliteral">&quot;/&quot;</highlight><highlight class="normal">)[-1]</highlight></codeline>
<codeline lineno="54" refid="namespacesample__consistency_1a85366822fbdd064f24b53f9236541c0f" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:<sp/>dt<sp/>=<sp/>data[</highlight><highlight class="stringliteral">&quot;mc16&quot;</highlight><highlight class="normal">][smpls];<sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>KeyError:</highlight></codeline>
<codeline lineno="56"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dt<sp/>=<sp/><ref refid="classsample__consistency_1_1_sample_content" kindref="compound">SampleContent</ref>()</highlight></codeline>
<codeline lineno="57"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dt._isdata<sp/>=<sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="58"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data[</highlight><highlight class="stringliteral">&quot;mc16&quot;</highlight><highlight class="normal">][smpls]<sp/>=<sp/>dt</highlight></codeline>
<codeline lineno="59"><highlight class="normal"><sp/><sp/><sp/><sp/>dt.addSample(i)</highlight></codeline>
<codeline lineno="60" refid="namespacesample__consistency_1a6ef5a45d3913c2491911a6b5587f609f" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/>update<sp/>=<sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="61"><highlight class="normal"><sp/><sp/><sp/><sp/>print(i)</highlight></codeline>
<codeline lineno="62"><highlight class="normal"></highlight></codeline>
<codeline lineno="63" refid="namespacesample__consistency_1a5c8012e4c51ccc4f480ff67ad9f46cea" refkind="member"><highlight class="normal">gnn<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;/CERN/trainings/mc16-full-inference/ROOT/GraphJets_bn_1_Grift/&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="64"><highlight class="normal">gnn<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;/CERN/trainings/mc16-full-inference/ROOT/GraphJets_bn_1_Grift/&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="65" refid="namespacesample__consistency_1a60f446f46bc56dfc3e3a2e923a64d92f" refkind="member"><highlight class="normal">gnn_samples<sp/>=<sp/><ref refid="namespacesample__consistency_1a8ba8f1cc971d64a05ca6a22a5e8d93d3" kindref="member">build_samples</ref>(gnn)</highlight></codeline>
<codeline lineno="66" refid="namespacesample__consistency_1af83c136d0971c9b9b4f71461b5f7cbe5" refkind="member"><highlight class="normal">lxn<sp/>=<sp/>len(gnn_samples)</highlight></codeline>
<codeline lineno="67"><highlight class="normal"></highlight></codeline>
<codeline lineno="68"><highlight class="normal">update<sp/>=<sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="69"><highlight class="normal"></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>i<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>range(lxn):</highlight></codeline>
<codeline lineno="70" refid="namespacesample__consistency_1adb7ea50a17a40d126d297be22f83e1ba" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/>name<sp/>=<sp/>gnn_samples[i]</highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:<sp/>data[</highlight><highlight class="stringliteral">&quot;null&quot;</highlight><highlight class="normal">][name];<sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="72"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>KeyError:<sp/></highlight><highlight class="keywordflow">pass</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="73"><highlight class="normal"></highlight></codeline>
<codeline lineno="74"><highlight class="normal"><sp/><sp/><sp/><sp/>print(name,<sp/>float(i<sp/>/<sp/>lxn))</highlight></codeline>
<codeline lineno="75" refid="namespacesample__consistency_1a40640dc852a5abc09d3e882d42cf80ac" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/>smpln<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;/&quot;</highlight><highlight class="normal">.join(name.split(</highlight><highlight class="stringliteral">&quot;/&quot;</highlight><highlight class="normal">)[:-3])</highlight></codeline>
<codeline lineno="76"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:<sp/>dt<sp/>=<sp/>data[smpln]</highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>KeyError:</highlight></codeline>
<codeline lineno="78"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dt<sp/>=<sp/><ref refid="classsample__consistency_1_1_sample_content" kindref="compound">SampleContent</ref>()</highlight></codeline>
<codeline lineno="79"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data[smpln]<sp/>=<sp/>dt</highlight></codeline>
<codeline lineno="80"><highlight class="normal"><sp/><sp/><sp/><sp/>dt.addSample(name)</highlight></codeline>
<codeline lineno="81"><highlight class="normal"><sp/><sp/><sp/><sp/>data[</highlight><highlight class="stringliteral">&quot;null&quot;</highlight><highlight class="normal">][name]<sp/>=<sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="82"><highlight class="normal"><sp/><sp/><sp/><sp/>update<sp/>=<sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="83"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>i<sp/>%<sp/>1000<sp/>!=<sp/>1000-1:<sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="84" refid="namespacesample__consistency_1a1830b56464f1832ec4839487ee09db1a" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/>pathlib.Path(</highlight><highlight class="stringliteral">&quot;./cache&quot;</highlight><highlight class="normal">).mkdir(parents<sp/>=<sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal">,<sp/>exist_ok<sp/>=<sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="85" refid="namespacesample__consistency_1a838716d61f774ec0ca5bb178315ffc89" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/>f<sp/>=<sp/>open(</highlight><highlight class="stringliteral">&quot;./cache/data.pkl&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;wb&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="86"><highlight class="normal"><sp/><sp/><sp/><sp/>pickle.dump(data,<sp/>f)</highlight></codeline>
<codeline lineno="87"><highlight class="normal"><sp/><sp/><sp/><sp/>f.close()</highlight></codeline>
<codeline lineno="88"><highlight class="normal"><sp/><sp/><sp/><sp/>update<sp/>=<sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="89"><highlight class="normal"></highlight></codeline>
<codeline lineno="90"><highlight class="normal"></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>update:</highlight></codeline>
<codeline lineno="91"><highlight class="normal"><sp/><sp/><sp/><sp/>pathlib.Path(</highlight><highlight class="stringliteral">&quot;./cache&quot;</highlight><highlight class="normal">).mkdir(parents<sp/>=<sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal">,<sp/>exist_ok<sp/>=<sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/><sp/><sp/><sp/>f<sp/>=<sp/>open(</highlight><highlight class="stringliteral">&quot;./cache/data.pkl&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;wb&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="93"><highlight class="normal"><sp/><sp/><sp/><sp/>pickle.dump(data,<sp/>f)</highlight></codeline>
<codeline lineno="94"><highlight class="normal"><sp/><sp/><sp/><sp/>f.close()</highlight></codeline>
<codeline lineno="95"><highlight class="normal"></highlight></codeline>
<codeline lineno="96" refid="namespacesample__consistency_1a694e6bc928e298c82eb73e3c6f476420" refkind="member"><highlight class="normal">mc16<sp/>=<sp/>data[</highlight><highlight class="stringliteral">&quot;mc16&quot;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="97" refid="namespacesample__consistency_1a14a71096369e7413ad75e28fa91fb6a3" refkind="member"><highlight class="normal">models<sp/>=<sp/>{i<sp/>:<sp/>data[i]<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>i<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>data<sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>i<sp/>!=<sp/></highlight><highlight class="stringliteral">&quot;mc16&quot;</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/>i<sp/>!=<sp/></highlight><highlight class="stringliteral">&quot;null&quot;</highlight><highlight class="normal">}</highlight></codeline>
<codeline lineno="98"><highlight class="normal"></highlight></codeline>
<codeline lineno="99" refid="namespacesample__consistency_1abbc834de0dcfdeb31411d76395e4dc46" refkind="member"><highlight class="normal">passed<sp/>=<sp/>{}</highlight></codeline>
<codeline lineno="100" refid="namespacesample__consistency_1a1473b6672980b3a91c14351c5261003c" refkind="member"><highlight class="normal">missed<sp/>=<sp/>{}</highlight></codeline>
<codeline lineno="101"><highlight class="normal"></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>t<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>mc16:</highlight></codeline>
<codeline lineno="102"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>stats,<sp/>key<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>mc16[t]:</highlight></codeline>
<codeline lineno="103" refid="namespacesample__consistency_1adcaad1d3d417480220fe9321265f07f9" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fname,<sp/>stx<sp/>=<sp/>list(stats.items())[0]</highlight></codeline>
<codeline lineno="104"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>fx<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>models:</highlight></codeline>
<codeline lineno="105" refid="namespacesample__consistency_1aab1b3f09e260bf3c541cbfdeacec7496" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>modname<sp/>=<sp/>fx<sp/>+<sp/></highlight><highlight class="stringliteral">&quot;/&quot;</highlight><highlight class="normal"><sp/>+<sp/>models[fx]._kfold</highlight></codeline>
<codeline lineno="106" refid="namespacesample__consistency_1a5251e6021ce5f0df5a314a928a745fc3" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:<sp/>stm<sp/>=<sp/>models[fx]._samples[key][fname]</highlight></codeline>
<codeline lineno="107"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>KeyError:<sp/>stm<sp/>=<sp/>0</highlight></codeline>
<codeline lineno="108"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>stm<sp/>==<sp/>stx:</highlight></codeline>
<codeline lineno="109"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>modname<sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>passed:<sp/>passed[modname]<sp/>=<sp/>{}</highlight></codeline>
<codeline lineno="110"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>passed[modname][key<sp/>+<sp/></highlight><highlight class="stringliteral">&quot;/&quot;</highlight><highlight class="normal">+<sp/>fname]<sp/>=<sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="111"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="112"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>modname<sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>missed:<sp/>missed[modname]<sp/>=<sp/>{}</highlight></codeline>
<codeline lineno="113"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>missed[modname][key<sp/>+<sp/></highlight><highlight class="stringliteral">&quot;/&quot;</highlight><highlight class="normal"><sp/>+<sp/>fname]<sp/>=<sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="114"><highlight class="normal"></highlight></codeline>
<codeline lineno="115"><highlight class="normal">print(</highlight><highlight class="stringliteral">&quot;----<sp/>missed<sp/>----&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="116" refid="namespacesample__consistency_1a7760b1b7e8928fe55cfc8ba530655e34" refkind="member"><highlight class="normal">mutual<sp/>=<sp/>[]</highlight></codeline>
<codeline lineno="117"><highlight class="normal"></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>i<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>missed:<sp/>mutual<sp/>+=<sp/>list(missed[i])</highlight></codeline>
<codeline lineno="118"><highlight class="normal">missed<sp/>=<sp/>list(set(mutual))</highlight></codeline>
<codeline lineno="119"><highlight class="normal"></highlight></codeline>
<codeline lineno="120"><highlight class="normal"></highlight></codeline>
<codeline lineno="121"><highlight class="normal"></highlight></codeline>
    </programlisting>
    <location file="/workspaces/AnalysisG/studies/performance/sample_consistency.py"/>
  </compounddef>
</doxygen>
