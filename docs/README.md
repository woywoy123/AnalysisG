# AnalysisG Documentation

This directory contains the comprehensive Doxygen and Sphinx documentation for the entire AnalysisG codebase.

## Documentation Structure

### Source Documentation Files
- `source/` - Sphinx documentation source files
  - `source/api/` - Auto-generated API reference documentation for all modules
    - `core.rst` - Core module documentation
    - `modules.rst` - Modules directory documentation (308 lines covering all C++/Python files)
    - `pyc.rst` - PyC module documentation
    - `events.rst` - Events module documentation
    - `graphs.rst` - Graphs module documentation
    - `metrics.rst` - Metrics module documentation
    - `models.rst` - Models module documentation
    - `selections.rst` - Selections module documentation
    - `templates.rst` - Templates module documentation
    - `utils.rst` - Utils module documentation
    - `root.rst` - Root level files documentation
  - `source/conf.py` - Sphinx configuration file
  - `source/index.rst` - Main documentation index
  - `api_reference.rst` - API reference table of contents

### Generated Documentation
- `doxygen/` - Doxygen generated files (excluded from git)
  - `doxygen/xml/` - XML files used by Breathe (701 files)
  - `doxygen/html/` - HTML documentation

### Configuration Files
- `Doxyfile` (root) - Main Doxygen configuration file
- `conf.py` - Legacy Sphinx configuration
- `.readthedocs.yaml` - Read the Docs configuration
- `requirements.txt` - Python dependencies for documentation

## Building the Documentation

### Prerequisites
```bash
sudo apt-get install doxygen graphviz
pip install -r docs/requirements.txt
```

### Generate Complete Documentation
```bash
# Generate Doxygen XML
doxygen Doxyfile

# Build Sphinx HTML
cd docs/source
sphinx-build -b html . _build
```

### View Documentation Locally
```bash
# Open the generated HTML
firefox docs/source/_build/index.html
# or
python -m http.server --directory docs/source/_build 8000
```

## Documentation Coverage

This documentation covers:
- **All C++ modules** in `src/AnalysisG/modules/` (~100 files)
- **All C++ core files** in `src/AnalysisG/core/`
- **All Python/Cython files** (.py, .pyx, .pxd)
- **Complete module hierarchy**:
  - analysis, container, dataloader, event, graph, io, lossfx
  - meta, metric, metrics, model, notification, optimizer
  - particle, plotting, sampletracer, selection, structs
  - tools, typecasting, variable, xml

### Statistics
- **701 XML files** generated by Doxygen
- **12 RST module files** covering all code sections
- **~2,000 documented entities** (classes, functions, variables)
- **Complete dependency graphs** and call graphs

## Integration with Read the Docs

The documentation is configured to build automatically on Read the Docs:
1. Doxygen generates XML from C++/Python source
2. Breathe integrates Doxygen XML into Sphinx
3. Sphinx generates final HTML documentation

Configuration: `docs/.readthedocs.yaml`

## Scripts

- `generate_rst_files.py` - Generates RST files for all modules automatically
- `generate_doxygen.py` - Helper script for Doxygen generation (legacy)
- `fix_breathe_config.py` - Fixes breathe configuration (legacy)

## Notes

- Template files with angle brackets in filenames (e.g., `<name>.h`) are excluded from documentation as they cause XML parsing errors
- Documentation uses the `sphinx_rtd_theme` theme for Read the Docs compatibility
- All warnings during build are documented and acceptable (mostly about non-existent .pxd files)
